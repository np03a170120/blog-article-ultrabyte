if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }

__d("PhotosUploadID",[],(function(a,b,c,d,e,f){var g=1024;function a(){return(g++).toString()}f.getNewID=a}),66);
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","mixin"],(function(a,b,c,d,e,f,g){var h="scraperLastPermissiveMatch";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.input=b;d.enable();d.getValueFn=c;return d}var e=b.prototype;e.reset=function(){d("DataStore").set(this.input,h,null)};e.enable=function(){if(this.events)return;var a=function(a){window.setTimeout(this.check.bind(this,a),30)};this.events=c("Event").listen(this.input,{paste:a.bind(this,!1),keydown:a.bind(this,!0)})};e.disable=function(){if(!this.events)return;for(var a in this.events)this.events[a].remove();this.events=null};e.check=function(a){var c=this.getValueFn?this.getValueFn():this.input.value;if(a&&b.trigger(c))return;a=b.match(c);c=d("URLMatcher").permissiveMatch(c);c&&c!=d("DataStore").get(this.input,h)&&(d("DataStore").set(this.input,h,c),this.inform("match",{url:a||c,alt_url:c}))};return b}(c("mixin")(d("ArbiterMixin")));Object.assign(a,d("URLMatcher"));g["default"]=a}),98);
__d("isNumberLike",[],(function(a,b,c,d,e,f){function a(a){return!isNaN(parseFloat(a))&&isFinite(a)}f["default"]=a}),66);
__d("XSlideshowShakrOAuthController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/shakr/",{})}),null);
__d("XSlideshowStorylineMoodAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/storyline_mood/",{target_id:{type:"FBID"}})}),null);
__d("XSlideshowStorylineMoodDeleteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/storyline_mood/delete/",{})}),null);
__d("XSlideshowStorylineMoodUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/storyline_mood/upload/",{})}),null);
__d("XSlideshowVideoFrameImagesAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/frame_images/",{request_type:{type:"Enum",enumType:0},video_id:{type:"FBID"}})}),null);
__d("SlideshowDataManager",["AsyncRequest","ThisControllerNoLongerExists","XSlideshowShakrOAuthController","XSlideshowStorylineMoodAsyncController","XSlideshowStorylineMoodDeleteController","XSlideshowStorylineMoodUploadController","XSlideshowVideoFrameImagesAsyncController","immutable"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.fetchStorylineMoodSource=function(a,b,d){var e=c("XSlideshowStorylineMoodAsyncController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(e).setData({storyline_mood_id:a,total_length:b}).setMethod("POST").setHandler(function(a){return d(a.payload)}).send()};b.fetchStorylineMoodFiles=function(a,b){var d=this,e=c("XSlideshowStorylineMoodAsyncController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(e).setMethod("GET").setData({target_id:b}).setReadOnly(!0).setHandler(function(b){return a(d.getStorylineMoodFiles(b.payload))}).send()};b.getStorylineMoodFiles=function(a){var b=[];Object.keys(a).forEach(function(c){b.push({moodID:c,fileName:a[c].fileName,categories:a[c].categories,source:null})});return c("immutable").List(b)};b.scheduleFrameImagesAsyncJob=function(a){var b=c("XSlideshowVideoFrameImagesAsyncController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(b).setData({request_type:0,video_id:a}).setMethod("POST").send()};b.fetchVideoFrameImages=function(a,b){var d=c("XSlideshowVideoFrameImagesAsyncController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(d).setData({request_type:1,video_id:b}).setMethod("POST").setHandler(function(b){return a(b.payload)}).send()};b.uploadAudioFile=function(a,b,d,e){var f=this;if(!a||!a.input||!a.input.files.length)return;var g=c("XSlideshowStorylineMoodUploadController").getURIBuilder().getURI(),h=new FormData();h.append("audio_file",a.input.files[0]);h.append("target_id",b);new(c("AsyncRequest"))().setURI(g).setRawData(h).setMethod("POST").setErrorHandler(function(a){return e()}).setHandler(function(a){return f.$1(a.payload,d,e)}).send();a.clear()};b.$1=function(a,b,c){a.success?b({moodID:a.moodID,fileName:a.fileName,categories:a.categories,source:null}):c()};b.deleteAudioFile=function(a){var b=c("XSlideshowStorylineMoodDeleteController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(b).setData({mood_id:a}).setMethod("POST").send()};b.getShakrScopeToken=function(a){var b=c("XSlideshowShakrOAuthController").getURIBuilder();new(c("AsyncRequest"))().setURI(b.getURI()).setHandler(function(b){return a(b.payload)}).send()};b.pollShakrForVideoURL=function(a,b){var e=d("ThisControllerNoLongerExists").__DEADBUILDER__("o279ohaf");new(c("AsyncRequest"))().setURI(e.getURI()).setData({show_id:a}).setHandler(function(a){return b(a.payload)}).send()};return a}();b=new a();g["default"]=b}),98);
__d("dotAccess",[],(function(a,b,c,d,e,f){function a(a,b,c){b=b.split(".");do{var d=b.shift();a=a[d]||c&&(a[d]={})}while(b.length&&a);return a}f["default"]=a}),66);
__d("PhotosUploadWaterfallXMixin",["invariant","AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","randomInt"],(function(a,b,c,d,e,f,g){var h=new Map();function i(a,c){var d={};a.client_time=Math.round(Date.now()/1e3);b("PhotosUploadWaterfallXConfig").retryBanzai&&(d.retry=!0,a.nonce=b("randomInt")(4294967296));b("Banzai").post(b("PhotosUploadWaterfallXConfig").banzaiRoute,a,d);c&&setTimeout(c,0)}function j(a,c){if(b("PhotosUploadWaterfallXConfig").useBanzai)i(a,c);else{a=new(b("AsyncSignal"))(b("PhotosUploadWaterfallXConfig").loggingEndpoint,{data:JSON.stringify(a)}).setHandler(c);b("PhotosUploadWaterfallXConfig").timeout&&a.setTimeout(10*1e3);a.send()}}e.exports={logStep:function(a,b,c){var d=this.getWaterfallID&&this.getWaterfallID(),e=this.getWaterfallAppName&&this.getWaterfallAppName();if(!d||!e)return;j(babelHelpers["extends"]({step:a,qn:d,uploader:e,ref:this.getWaterfallSource&&this.getWaterfallSource()},b),c)},logPUWStep:function(a,b,c,d,e,f,g){if(f&&f.logOncePerSession){h.has(b)||h.set(b,new Set());if(h.get(b).has(a))return;h.get(b).add(a)}j(babelHelpers["extends"]({step:a,qn:b,uploader:c,ref:d},e),g)}}}),null);
__d("SlideshowFlowTypes",[],(function(a,b,c,d,e,f){"use strict";a={SETTINGS_TAB:"SETTINGS_TAB",MUSIC_TAB:"MUSIC_TAB",FRAMES_TAB:"FRAMES_TAB"};f.SlideshowTabKey=a}),66);